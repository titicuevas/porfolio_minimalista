---
import Section from "../Section.astro"
import HTML from "@/icons/html.astro"
import CSS from "@/icons/css.astro"
import JavaScript from "@/icons/javascript.astro"
import React from "@/icons/react.astro"
import MySQL from "@/icons/sql.astro"
import Git from "@/icons/git.astro"
import GitHub from "@/icons/GitHub.astro"
import Tailwind from "@/icons/tailwind.astro"
import PHP from "@/icons/php.astro"
import Laravel from "@/icons/laravel.astro"
import Python from "@/icons/python.astro"
import PostgreSQL from "@/icons/postgresql.astro"
import Docker from "@/icons/docker.astro"
import WordPress from "@/icons/wordpress.astro"
import SourceTree from "@/icons/sourcetree.astro"
import Bootstrap from "@/icons/bootstrap.astro"
import Supabase from "@/icons/supabase.astro"
import Kanban from "@/icons/kanban.astro"
import { skills } from "@cv"

const SKILLS_ICONS = {
  HTML,
  CSS,
  JavaScript,
  React,
  MySQL,
  Git,
  GitHub,
  Tailwind,
  PHP,
  Laravel,
  Python,
  PostgreSQL,
  Docker,
  WordPress,
  SourceTree,
  Bootstrap,
  Supabase,
  Kanban,
}

const frontend = [
  "HTML", "CSS", "Bootstrap", "Tailwind", "JavaScript", "React", "Astro"
]
const backend = [
  "PHP", "Laravel", "Python", "PostgreSQL", "MySQL", "Docker", "Supabase"
]
const herramientas = [
  "Postman", "AWS"
]
const otras = [
  "WordPress", "SourceTree", "Git", "GitHub", "Scrum", "Kanban"
]

const getSkills = (names: string[]): typeof skills => skills.filter((s: { name: string }) => names.includes(s.name))

---
<Section title="Habilidades">
  <div class="skills-group">
    <h3>Frontend</h3>
    <ul class="skills-chips-row">
      {getSkills(frontend).map(({ name }) => {
        const Icon = SKILLS_ICONS[name as keyof typeof SKILLS_ICONS]
        return (
          <li class="skill-chip" title={name}>{Icon && <Icon title={name} /> }<span>{name}</span></li>
        )
      })}
    </ul>
  </div>
  <div class="skills-group">
    <h3>Backend</h3>
    <ul class="skills-chips-row">
      {getSkills(backend).map(({ name }) => {
        const Icon = SKILLS_ICONS[name as keyof typeof SKILLS_ICONS]
        return (
          <li class="skill-chip" title={name}>{Icon && <Icon title={name} /> }<span>{name}</span></li>
        )
      })}
    </ul>
  </div>
  <div class="skills-group">
    <h3>Herramientas</h3>
    <ul class="skills-chips-row">
      {getSkills(herramientas).map(({ name }) => {
        const Icon = SKILLS_ICONS[name as keyof typeof SKILLS_ICONS]
        return (
          <li class="skill-chip" title={name}>{Icon && <Icon title={name} /> }<span>{name}</span></li>
        )
      })}
    </ul>
  </div>
  <div class="skills-group">
    <h3>Otras</h3>
    <ul class="skills-chips-row">
      {getSkills(otras).map(({ name }) => {
        const Icon = SKILLS_ICONS[name as keyof typeof SKILLS_ICONS]
        return (
          <li class="skill-chip" title={name}>{Icon && <Icon title={name} /> }<span>{name}</span></li>
        )
      })}
    </ul>
  </div>
</Section>

<style>
  .skills-group {
    margin-bottom: 18px;
  }
  .skills-group h3 {
    font-size: 1.1em;
    font-weight: 700;
    margin-bottom: 6px;
    color: var(--primary-color);
    letter-spacing: 0.01em;
  }
  .skills-chips-row {
    display: flex;
    gap: 14px;
    flex-wrap: wrap;
    margin-top: 10px;
    justify-content: flex-start;
  }
  .skill-chip {
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--card-bg-color);
    border-radius: 999px;
    padding: 12px 26px;
    font-size: 1.12em;
    font-weight: 500;
    color: var(--text-color);
    box-shadow: 0 2px 8px #00000044;
    transition: background 0.2s, transform 0.2s, box-shadow 0.2s;
    cursor: pointer;
    will-change: transform, background, color;
  }
  .skill-chip svg {
    width: 38px;
    height: 38px;
    color: inherit;
    transition: filter 0.2s, transform 0.2s;
  }
  .skill-chip:hover {
    background: var(--primary-color);
    color: var(--heading-color);
    transform: translateY(-4px) scale(1.13);
    box-shadow: 0 6px 24px #00000066;
  }
  .skill-chip:hover svg {
    filter: brightness(1.3) drop-shadow(0 2px 8px #00000033);
    transform: scale(1.18);
  }
  html.dark .skill-chip svg {
    color: #E0E0E0;
    fill: #E0E0E0;
    stroke: #E0E0E0;
  }
  /* Excepciones de color para iconos reconocibles */
  html.dark .skill-chip svg[title="Supabase"] {
    color: #3ecf8e;
    fill: #3ecf8e;
    stroke: #3ecf8e;
  }
  html.dark .skill-chip svg[title="Tailwind"] {
    color: #38bdf8;
    fill: #38bdf8;
    stroke: #38bdf8;
  }
  html.dark .skill-chip svg[title="GitHub"] {
    color: #fff;
    fill: #fff;
    stroke: #fff;
  }
  html.dark .skill-chip svg[title="Git"] {
    color: #f34f29;
    fill: #f34f29;
    stroke: #f34f29;
  }
</style>
